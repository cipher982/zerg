🚀 Setting up test environment...
✅ Pre-test cleanup completed
✅ Test environment setup completed

Running 6 tests using 2 workers

[1A[2K[1/6] [chromium] › tests/canvas_api_contract.spec.ts:13:7 › Canvas API Contract Tests › Canvas endpoint exists and does not return 404
[1A[2K[2/6] [chromium] › tests/agent_creation_full.spec.ts:15:7 › Agent Creation Full Workflow › Complete agent creation and isolation test
[1A[2K[chromium] › tests/agent_creation_full.spec.ts:15:7 › Agent Creation Full Workflow › Complete agent creation and isolation test
🔍 Starting complete agent creation test...

[1A[2K📊 Worker ID: 0

[1A[2K📊 Step 0: Resetting database...

[1A[2K[3/6] [chromium] › tests/canvas_api_contract.spec.ts:42:7 › Canvas API Contract Tests › Wrong canvas-data endpoint returns 404
[1A[2K[2m[WebServer] [22mResetting database - dropping all tables

[1A[2K✅ Database reset successful

[1A[2K📊 Step 1: Verifying empty state...

[1A[2K[4/6] [chromium] › tests/canvas_api_contract.spec.ts:42:7 › Canvas API Contract Tests › Wrong canvas-data endpoint returns 404 (retry #1)
[1A[2K  1) [chromium] › tests/canvas_api_contract.spec.ts:42:7 › Canvas API Contract Tests › Wrong canvas-data endpoint returns 404 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m404[39m
    Received: [31m0[39m

      64 |
      65 |     // This SHOULD return 404 to confirm the wrong endpoint doesn't exist
    > 66 |     expect(response.status).toBe(404);
         |                             ^
      67 |   });
      68 |
      69 |   test('Canvas tab loads without network errors', async ({ page }) => {
        at /Users/davidrose/git/zerg/e2e/tests/canvas_api_contract.spec.ts:66:29

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results/canvas_api_contract-Canvas-52b50-s-data-endpoint-returns-404-chromium/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results/canvas_api_contract-Canvas-52b50-s-data-endpoint-returns-404-chromium/error-context.md

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results/canvas_api_contract-Canvas-52b50-s-data-endpoint-returns-404-chromium/trace.zip
    Usage:

        npx playwright show-trace test-results/canvas_api_contract-Canvas-52b50-s-data-endpoint-returns-404-chromium/trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

    Retry #1 ───────────────────────────────────────────────────────────────────────────────────────

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m404[39m
    Received: [31m0[39m

      64 |
      65 |     // This SHOULD return 404 to confirm the wrong endpoint doesn't exist
    > 66 |     expect(response.status).toBe(404);
         |                             ^
      67 |   });
      68 |
      69 |   test('Canvas tab loads without network errors', async ({ page }) => {
        at /Users/davidrose/git/zerg/e2e/tests/canvas_api_contract.spec.ts:66:29

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results/canvas_api_contract-Canvas-52b50-s-data-endpoint-returns-404-chromium-retry1/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results/canvas_api_contract-Canvas-52b50-s-data-endpoint-returns-404-chromium-retry1/error-context.md

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results/canvas_api_contract-Canvas-52b50-s-data-endpoint-returns-404-chromium-retry1/trace.zip
    Usage:

        npx playwright show-trace test-results/canvas_api_contract-Canvas-52b50-s-data-endpoint-returns-404-chromium-retry1/trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────


[1A[2K[5/6] [chromium] › tests/canvas_api_contract.spec.ts:69:7 › Canvas API Contract Tests › Canvas tab loads without network errors
[1A[2K[6/6] [chromium] › tests/canvas_complete_workflow.spec.ts:17:7 › Complete Canvas Workflow › End-to-end canvas workflow with agent and tool execution
