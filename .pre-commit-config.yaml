# Apply to all files without commiting:
#   pre-commit run --all-files
# Update this file:
#   pre-commit autoupdate
repos:
  -   repo: https://github.com/pre-commit/pre-commit-hooks
      rev: v4.6.0
      hooks:
        -   id: fix-byte-order-marker
        -   id: check-case-conflict
        -   id: check-executables-have-shebangs
        -   id: check-json
  -   repo: https://github.com/astral-sh/ruff-pre-commit
      rev: v0.4.4
      hooks:
        -   id: ruff
            args: ["--fix"]
            files: ^backend/
        -   id: ruff-format
            files: ^backend/

# # ---------------------------------------------------------------------------
# # Local hooks – Rust lint and DOM-ID prefix guard (frontend)
# # ---------------------------------------------------------------------------
# -   repo: local
#     hooks:
#       - id: rust-clippy
#         name: "rust-clippy (frontend)"
#         language: system
#         entry: bash -c 'cd frontend && cargo clippy --quiet -- -D warnings'
#         files: ^frontend/

# #      - id: dom-id-prefix-check
# #        name: "DOM id prefix rule"
# #        language: system
# #        entry: bash -c 'grep -R --line-number --perl-regexp "id=\"(?!agent-|workflow-|global-)" frontend/src | if read var; then echo "✖ Non-namespaced DOM id detected:"; echo "$var"; exit 1; fi'
# #        pass_filenames: false