# ==============================================================================
# SWARM PLATFORM ENVIRONMENT VARIABLES
# Unified configuration for Zerg (agent backend) + Jarvis (voice/text UI)
# ==============================================================================
# Copy to `.env` at repo root and adjust values for your environment.
#
# Required variables are marked [REQUIRED].
# Docker Compose profiles: zerg, full, prod (see docker/docker-compose.yml)

# ==============================================================================
# DATABASE [REQUIRED]
# ==============================================================================
# PostgreSQL credentials for Docker Compose
POSTGRES_DB=zerg
POSTGRES_USER=zerg
POSTGRES_PASSWORD=zerg

# Full database URL (auto-constructed in Docker; override for external DB)
# DATABASE_URL=postgresql://zerg:zerg@postgres:5432/zerg

# ==============================================================================
# OPENAI / LLM [REQUIRED for AI features]
# ==============================================================================
OPENAI_API_KEY="sk-your-key-here"

# Optional: cap LLM completion size (0 disables)
MAX_OUTPUT_TOKENS=1000

# Optional: per-user daily runs cap (0 disables)
DAILY_RUNS_PER_USER=100

# Optional: restrict non-admin users to specific models (csv)
ALLOWED_MODELS_NON_ADMIN=gpt-4o-mini

# Emit per-token chunks over WebSocket during agent runs
LLM_TOKEN_STREAM=true

# ==============================================================================
# AUTHENTICATION
# ==============================================================================
# Development shortcut: set to "1" to bypass all auth checks
# WARNING: Set to "0" in production!
AUTH_DISABLED=1

# Google OAuth (required when AUTH_DISABLED=0)
GOOGLE_CLIENT_ID="change-me.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="change-me-secret"

# GitHub OAuth (optional)
GITHUB_CLIENT_ID=""
GITHUB_CLIENT_SECRET=""

# JWT signing secret (HS256) - use strong random value in production
JWT_SECRET="dev-secret"

# Fernet encryption key for sensitive data (32+ chars)
FERNET_SECRET="dev_fernet_secret_32_chars_long!"

# Trigger signing secret for webhooks
TRIGGER_SIGNING_SECRET="dev_trigger_secret"

# ==============================================================================
# JARVIS INTEGRATION
# ==============================================================================
# Device secret for Jarvis <-> Zerg authentication
JARVIS_DEVICE_SECRET="jarvis-secure-device-secret-change-me"

# MCP server integration (set to 0 to enable MCP tools)
SKIP_MCP=1

# ==============================================================================
# PORT CONFIGURATION
# ==============================================================================
# Full profile (make dev): Single nginx entry point
JARPXY_PORT=30080

# Zerg profile (make zerg): Direct port exposure
BACKEND_PORT=47300
FRONTEND_PORT=47200

# Internal service ports (Docker network only, used by nginx)
JARVIS_WEB_PORT=8080
JARVIS_SERVER_PORT=8787
ZERG_BACKEND_PORT=8000
ZERG_FRONTEND_PORT=5173

# ==============================================================================
# FRONTEND (VITE_ prefix exposes to browser)
# ==============================================================================
# API/WebSocket URLs (set automatically by Docker Compose for dev)
# For production, set VITE_WS_BASE_URL to your domain with wss:// protocol
# VITE_API_BASE_URL=/api
# VITE_WS_BASE_URL=wss://yourdomain.com

# Enable frontend auth guard (should match AUTH_DISABLED inverse)
VITE_AUTH_ENABLED=false

# Google OAuth client ID for frontend
# VITE_GOOGLE_CLIENT_ID=change-me.apps.googleusercontent.com

# ==============================================================================
# USER LIMITS / ADMIN
# ==============================================================================
# Maximum users allowed to sign up (0 = unlimited)
MAX_USERS=20

# Comma-separated admin emails (bypass caps, elevated privileges)
ADMIN_EMAILS="me@example.com"

# Enable dev admin mode (bypass auth for development)
DEV_ADMIN=1

# Database reset password (production security)
DB_RESET_PASSWORD="your-secure-reset-password-here"

# ==============================================================================
# NOTIFICATIONS (OPTIONAL)
# ==============================================================================
# Discord webhook for budget alerts / daily digest
DISCORD_WEBHOOK_URL=""
DISCORD_ENABLE_ALERTS=0
DISCORD_DAILY_DIGEST_CRON="0 8 * * *"

# ==============================================================================
# GMAIL PUB/SUB (OPTIONAL - for email triggers)
# ==============================================================================
GMAIL_PUBSUB_TOPIC=""
PUBSUB_AUDIENCE=""

# ==============================================================================
# RUNTIME SETTINGS
# ==============================================================================
ENVIRONMENT=development

# CORS (use specific origins in production)
ALLOWED_CORS_ORIGINS="*"

# Public URL for callbacks and links
APP_PUBLIC_URL="http://localhost:30080"

# ==============================================================================
# LANGSMITH (OPTIONAL - enables LangChain tracing)
# ==============================================================================
# LANGCHAIN_API_KEY="ls-your-langsmith-key"
# LANGCHAIN_TRACING_V2=true
# LANGCHAIN_PROJECT=zerg

# ==============================================================================
# PRODUCTION DATA PATHS (prod profile only)
# ==============================================================================
# For production deployments, use bind mounts for easier backup management.
# Set these to enable the infrastructure standard data path pattern:
# POSTGRES_DATA_PATH=/var/lib/docker/data/swarm/postgres
# BACKEND_STATIC_PATH=/var/lib/docker/data/swarm/static
#
# If unset, Docker will use named volumes (postgres_data, backend_static).
# Production HTTP port (default 80):
# PROD_HTTP_PORT=80
